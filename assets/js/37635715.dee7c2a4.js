"use strict";(globalThis.webpackChunkshellui_docs=globalThis.webpackChunkshellui_docs||[]).push([[990],{526(e,i,n){n.r(i),n.d(i,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>t,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"features/service-worker","title":"Service Worker","description":"ShellUI includes a service worker that provides offline support, automatic app updates, and intelligent caching strategies.","source":"@site/../../docs/features/service-worker.md","sourceDirName":"features","slug":"/features/service-worker","permalink":"/features/service-worker","draft":false,"unlisted":false,"editUrl":"https://github.com/shellui/shellui/tree/main/../../docs/features/service-worker.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Cookie Consent","permalink":"/features/cookie-consent"},"next":{"title":"ShellUI CLI","permalink":"/cli"}}');var s=n(1085),l=n(1184);const t={},c="Service Worker",a={},o=[{value:"Overview",id:"overview",level:2},{value:"Automatic Registration",id:"automatic-registration",level:2},{value:"Update Detection",id:"update-detection",level:2},{value:"Update Notifications",id:"update-notifications",level:2},{value:"User Controls",id:"user-controls",level:2},{value:"Caching Strategies",id:"caching-strategies",level:2},{value:"Precache",id:"precache",level:3},{value:"Navigation",id:"navigation",level:3},{value:"API Calls",id:"api-calls",level:3},{value:"Offline Support",id:"offline-support",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Disable Service Worker",id:"disable-service-worker",level:3},{value:"Tauri Runtime",id:"tauri-runtime",level:3},{value:"Update Behavior",id:"update-behavior",level:2},{value:"Automatic Updates",id:"automatic-updates",level:3},{value:"Manual Updates",id:"manual-updates",level:3},{value:"Service Worker Lifecycle",id:"service-worker-lifecycle",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Service Worker Not Registering",id:"service-worker-not-registering",level:3},{value:"Updates Not Detecting",id:"updates-not-detecting",level:3},{value:"Service Worker Stuck",id:"service-worker-stuck",level:3},{value:"Development vs Production",id:"development-vs-production",level:2},{value:"Development",id:"development",level:3},{value:"Production",id:"production",level:3},{value:"Related Guides",id:"related-guides",level:2}];function d(e){const i={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.header,{children:(0,s.jsx)(i.h1,{id:"service-worker",children:"Service Worker"})}),"\n",(0,s.jsx)(i.p,{children:"ShellUI includes a service worker that provides offline support, automatic app updates, and intelligent caching strategies."}),"\n",(0,s.jsx)(i.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(i.p,{children:"The service worker:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Caches assets"})," for offline access"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Detects updates"})," automatically"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Notifies users"})," when updates are available"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Updates seamlessly"})," on page refresh"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Works in production"})," builds only (disabled in development)"]}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"automatic-registration",children:"Automatic Registration"}),"\n",(0,s.jsx)(i.p,{children:"The service worker is automatically registered when:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Running in production build"}),"\n",(0,s.jsx)(i.li,{children:"Navigation items are configured"}),"\n",(0,s.jsx)(i.li,{children:"Not running in Tauri (desktop apps use different caching)"}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:"No configuration needed - it works out of the box!"}),"\n",(0,s.jsx)(i.h2,{id:"update-detection",children:"Update Detection"}),"\n",(0,s.jsx)(i.p,{children:"ShellUI automatically detects when a new version of your app is available:"}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Background Check"}),": Service worker checks for updates in the background"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Update Found"}),": When an update is detected, a notification appears"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"User Choice"}),": User can update now or later"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Automatic Update"}),": On page refresh, the new version activates automatically"]}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"update-notifications",children:"Update Notifications"}),"\n",(0,s.jsx)(i.p,{children:"Users see toast notifications when updates are available:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Update Available"}),': "A new version is available. Refresh to update."']}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Update Installed"}),': "Update installed. Refresh to activate."']}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:"Users can:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:'Click "Refresh" to update immediately'}),"\n",(0,s.jsx)(i.li,{children:"Dismiss and update later (updates automatically on next page load)"}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"user-controls",children:"User Controls"}),"\n",(0,s.jsx)(i.p,{children:"Users can control the service worker in Settings > Advanced > Service Worker:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Enable/Disable"}),": Toggle service worker on or off"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Status"}),": See current registration status"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Update Check"}),": Manually check for updates"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Unregister"}),": Remove service worker (if needed)"]}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"caching-strategies",children:"Caching Strategies"}),"\n",(0,s.jsx)(i.p,{children:"ShellUI uses intelligent caching strategies:"}),"\n",(0,s.jsx)(i.h3,{id:"precache",children:"Precache"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"What"}),": All assets generated during build (HTML, CSS, JS, images)"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Strategy"}),": Cache-first with network fallback"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"When"}),": On service worker installation"]}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"navigation",children:"Navigation"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"What"}),": HTML pages and routes"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Strategy"}),": Network-first with cache fallback"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"When"}),": User navigates to a route"]}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"api-calls",children:"API Calls"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"What"}),": External API requests"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Strategy"}),": Network-first (not cached by default)"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"When"}),": API requests are made"]}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"offline-support",children:"Offline Support"}),"\n",(0,s.jsx)(i.p,{children:"When offline, ShellUI:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Serves cached assets"}),"\n",(0,s.jsx)(i.li,{children:"Shows cached pages"}),"\n",(0,s.jsx)(i.li,{children:"Displays offline indicators (if configured)"}),"\n",(0,s.jsx)(i.li,{children:"Queues actions for when connection is restored"}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"configuration",children:"Configuration"}),"\n",(0,s.jsx)(i.h3,{id:"disable-service-worker",children:"Disable Service Worker"}),"\n",(0,s.jsx)(i.p,{children:"Disable the service worker in your configuration:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-typescript",children:"import type { ShellUIConfig } from '@shellui/core';\n\nconst config: ShellUIConfig = {\n  runtime: 'tauri', // Disables service worker (for Tauri apps)\n  // ... rest of config\n};\n"})}),"\n",(0,s.jsx)(i.p,{children:"Or disable via user settings (Settings > Advanced > Service Worker)."}),"\n",(0,s.jsx)(i.h3,{id:"tauri-runtime",children:"Tauri Runtime"}),"\n",(0,s.jsx)(i.p,{children:"When running in Tauri, the service worker is automatically disabled:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-typescript",children:"const config: ShellUIConfig = {\n  runtime: 'tauri', // Service worker disabled automatically\n  // ... rest of config\n};\n"})}),"\n",(0,s.jsx)(i.p,{children:"Tauri uses its own caching system, so the service worker is not needed."}),"\n",(0,s.jsx)(i.h2,{id:"update-behavior",children:"Update Behavior"}),"\n",(0,s.jsx)(i.h3,{id:"automatic-updates",children:"Automatic Updates"}),"\n",(0,s.jsx)(i.p,{children:"On page refresh, ShellUI automatically:"}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsx)(i.li,{children:"Checks for waiting service worker"}),"\n",(0,s.jsx)(i.li,{children:"Activates the new version"}),"\n",(0,s.jsx)(i.li,{children:"Reloads the page with the new version"}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:"This ensures users always get the latest version after refreshing."}),"\n",(0,s.jsx)(i.h3,{id:"manual-updates",children:"Manual Updates"}),"\n",(0,s.jsx)(i.p,{children:"Users can manually update:"}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsx)(i.li,{children:"Go to Settings > Advanced > Service Worker"}),"\n",(0,s.jsx)(i.li,{children:'Click "Check for Updates"'}),"\n",(0,s.jsx)(i.li,{children:'If an update is available, click "Refresh" when prompted'}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"service-worker-lifecycle",children:"Service Worker Lifecycle"}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Installation"}),": Service worker installs and caches assets"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Activation"}),": Service worker activates and takes control"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Update Check"}),": Periodically checks for new versions"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Update Found"}),": New service worker installs in background"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Waiting"}),": New service worker waits for page refresh"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Activation"}),": On refresh, new service worker activates"]}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Let it work"}),": Service worker works automatically - no configuration needed"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Test updates"}),": Test your update flow before deploying"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Version your builds"}),": Use version numbers or build IDs to track updates"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Inform users"}),": Let users know when updates are available"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Handle offline"}),": Design your app to work offline when possible"]}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsx)(i.h3,{id:"service-worker-not-registering",children:"Service Worker Not Registering"}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.strong,{children:"Check:"})}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Are you running a production build? (Service worker is disabled in development)"}),"\n",(0,s.jsx)(i.li,{children:"Do you have navigation items configured?"}),"\n",(0,s.jsx)(i.li,{children:"Are you running in Tauri? (Service worker is disabled)"}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"updates-not-detecting",children:"Updates Not Detecting"}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.strong,{children:"Check:"})}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["Is the service worker file (",(0,s.jsx)(i.code,{children:"sw.js"}),") being generated?"]}),"\n",(0,s.jsx)(i.li,{children:"Are you deploying new builds correctly?"}),"\n",(0,s.jsx)(i.li,{children:"Is the browser cache cleared?"}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"service-worker-stuck",children:"Service Worker Stuck"}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.strong,{children:"Solution:"})}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsx)(i.li,{children:"Go to Settings > Advanced > Service Worker"}),"\n",(0,s.jsx)(i.li,{children:'Click "Unregister"'}),"\n",(0,s.jsx)(i.li,{children:"Refresh the page"}),"\n",(0,s.jsx)(i.li,{children:"Service worker will re-register"}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"development-vs-production",children:"Development vs Production"}),"\n",(0,s.jsx)(i.h3,{id:"development",children:"Development"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["Service worker is ",(0,s.jsx)(i.strong,{children:"disabled"})," by default"]}),"\n",(0,s.jsx)(i.li,{children:"Hot module replacement works normally"}),"\n",(0,s.jsx)(i.li,{children:"No caching interference"}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"production",children:"Production"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["Service worker is ",(0,s.jsx)(i.strong,{children:"enabled"})," automatically"]}),"\n",(0,s.jsx)(i.li,{children:"Assets are cached for offline access"}),"\n",(0,s.jsx)(i.li,{children:"Updates are detected automatically"}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"related-guides",children:"Related Guides"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.a,{href:"/cli",children:"CLI Reference"})," - Building for production"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.a,{href:"/tauri",children:"Tauri Integration"})," - Desktop apps (service worker disabled)"]}),"\n"]})]})}function h(e={}){const{wrapper:i}={...(0,l.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},1184(e,i,n){n.d(i,{R:()=>t,x:()=>c});var r=n(4041);const s={},l=r.createContext(s);function t(e){const i=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function c(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),r.createElement(l.Provider,{value:i},e.children)}}}]);