"use strict";(globalThis.webpackChunkshellui_docs=globalThis.webpackChunkshellui_docs||[]).push([[707],{1184(e,n,r){r.d(n,{R:()=>d,x:()=>l});var i=r(4041);const s={},t=i.createContext(s);function d(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),i.createElement(t.Provider,{value:n},e.children)}},9750(e,n,r){r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>a,frontMatter:()=>d,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"sentry","title":"Sentry Error Reporting","description":"ShellUI can report runtime errors to Sentry in production so you can track and fix bugs from real usage.","source":"@site/../../docs/sentry.md","sourceDirName":".","slug":"/sentry","permalink":"/sentry","draft":false,"unlisted":false,"editUrl":"https://github.com/shellui/shellui/tree/main/../../docs/sentry.md","tags":[],"version":"current","frontMatter":{}}');var s=r(1085),t=r(1184);const d={},l="Sentry Error Reporting",o={},c=[{value:"Behavior",id:"behavior",level:2},{value:"Configuration",id:"configuration",level:2},{value:"1. Environment variables",id:"1-environment-variables",level:3},{value:"2. Set environment variables",id:"2-set-environment-variables",level:3},{value:"3. Get your DSN",id:"3-get-your-dsn",level:3},{value:"How it is used",id:"how-it-is-used",level:2},{value:"Summary",id:"summary",level:2}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"sentry-error-reporting",children:"Sentry Error Reporting"})}),"\n",(0,s.jsxs)(n.p,{children:["ShellUI can report runtime errors to ",(0,s.jsx)(n.a,{href:"https://sentry.io",children:"Sentry"})," in production so you can track and fix bugs from real usage."]}),"\n",(0,s.jsx)(n.h2,{id:"behavior",children:"Behavior"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Production only"}),": Sentry is initialized only when the app is built and run in production. In development (",(0,s.jsx)(n.code,{children:"shellui start"})," / dev mode), Sentry is ",(0,s.jsx)(n.strong,{children:"never"})," initialized, so local errors are not sent and you avoid noise in your Sentry project."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Env-only, merged on load"}),": You do ",(0,s.jsx)(n.strong,{children:"not"})," add Sentry to ",(0,s.jsx)(n.code,{children:"shellui.config.ts"}),". The CLI merges Sentry into the config when it loads it, using environment variables. Enable or disable via env only."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,s.jsx)(n.h3,{id:"1-environment-variables",children:"1. Environment variables"}),"\n",(0,s.jsxs)(n.p,{children:["Sentry is ",(0,s.jsx)(n.strong,{children:"merged on load"})," by the CLI: when you run ",(0,s.jsx)(n.code,{children:"shellui build"})," or ",(0,s.jsx)(n.code,{children:"shellui start"}),", the loaded config is augmented with ",(0,s.jsx)(n.code,{children:"sentry"})," from env. No Sentry code in ",(0,s.jsx)(n.code,{children:"shellui.config.ts"})," is required."]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Environment variable"}),(0,s.jsx)(n.th,{children:"Required"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"SENTRY_DSN"})}),(0,s.jsx)(n.td,{children:"Yes (to enable)"}),(0,s.jsxs)(n.td,{children:["Your Sentry project DSN (Data Source Name). Find it in Sentry: Project \u2192 Settings \u2192 Client Keys (DSN). When set, Sentry is enabled (unless disabled via ",(0,s.jsx)(n.code,{children:"SENTRY_ENABLED"}),")."]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"SENTRY_ENABLED"})}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsxs)(n.td,{children:["Set to ",(0,s.jsx)(n.code,{children:"false"})," or ",(0,s.jsx)(n.code,{children:"0"})," to disable Sentry even when ",(0,s.jsx)(n.code,{children:"SENTRY_DSN"})," is set. Omit or set to any other value to allow Sentry when DSN is set."]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"SENTRY_ENVIRONMENT"})}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsxs)(n.td,{children:["Environment name (e.g. ",(0,s.jsx)(n.code,{children:"production"}),", ",(0,s.jsx)(n.code,{children:"staging"}),"). Defaults to ",(0,s.jsx)(n.code,{children:"production"})," if not set."]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"SENTRY_RELEASE"})}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"Release identifier (e.g. git SHA or app version). Useful for release-based grouping in Sentry."})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:["At build time the CLI injects these as three separate globals (one string each), not as part of the stringified app config: ",(0,s.jsx)(n.code,{children:"__SHELLUI_SENTRY_DSN__"}),", ",(0,s.jsx)(n.code,{children:"__SHELLUI_SENTRY_ENVIRONMENT__"}),", and ",(0,s.jsx)(n.code,{children:"__SHELLUI_SENTRY_RELEASE__"}),". The core reads them individually when initializing Sentry."]}),"\n",(0,s.jsx)(n.h3,{id:"2-set-environment-variables",children:"2. Set environment variables"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Local / manual builds"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Create a ",(0,s.jsx)(n.code,{children:".env"})," file in the project root (do not commit it; it is in ",(0,s.jsx)(n.code,{children:".gitignore"}),")."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Add:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-env",children:"SENTRY_DSN=https://your-key@your-org.ingest.sentry.io/project-id\nSENTRY_ENVIRONMENT=production\nSENTRY_RELEASE=1.0.0\n"})}),"\n",(0,s.jsxs)(n.p,{children:["To disable Sentry even when ",(0,s.jsx)(n.code,{children:"SENTRY_DSN"})," is set (e.g. for a staging build without reporting): set ",(0,s.jsx)(n.code,{children:"SENTRY_ENABLED=false"})," or ",(0,s.jsx)(n.code,{children:"SENTRY_ENABLED=0"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Ensure your build process loads ",(0,s.jsx)(n.code,{children:".env"})," before running the ShellUI build (e.g. if you use ",(0,s.jsx)(n.code,{children:"dotenv"})," or a tool that injects env, run it before ",(0,s.jsx)(n.code,{children:"shellui build"}),")."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"GitHub Actions (or other CI/CD)"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["In your workflow, set the same variables as ",(0,s.jsx)(n.strong,{children:"secrets"})," or ",(0,s.jsx)(n.strong,{children:"env"})," so they are available when the build runs."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Example:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"env:\n  SENTRY_DSN: ${{ secrets.SENTRY_DSN }}\n  SENTRY_ENVIRONMENT: production\n  SENTRY_RELEASE: ${{ github.sha }}\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Add ",(0,s.jsx)(n.code,{children:"SENTRY_DSN"})," in the repo/organization secrets (Sentry \u2192 Project \u2192 Settings \u2192 Client Keys (DSN))."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"3-get-your-dsn",children:"3. Get your DSN"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Sign in at ",(0,s.jsx)(n.a,{href:"https://sentry.io",children:"sentry.io"}),"."]}),"\n",(0,s.jsx)(n.li,{children:"Create or select a project (e.g. React / JavaScript)."}),"\n",(0,s.jsxs)(n.li,{children:["Go to ",(0,s.jsx)(n.strong,{children:"Settings \u2192 Client Keys (DSN)"})," and copy the DSN."]}),"\n",(0,s.jsxs)(n.li,{children:["Use this value for ",(0,s.jsx)(n.code,{children:"SENTRY_DSN"})," in ",(0,s.jsx)(n.code,{children:".env"})," or CI secrets."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"how-it-is-used",children:"How it is used"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"When Sentry runs"}),": Only in production builds. The app checks ",(0,s.jsx)(n.code,{children:"import.meta.env.DEV"}),"; when it is ",(0,s.jsx)(n.code,{children:"false"})," and the Sentry DSN is set, the ShellUI core initializes ",(0,s.jsx)(n.code,{children:"@sentry/react"}),". At build time the CLI injects three separate globals (one string each): ",(0,s.jsx)(n.code,{children:"__SHELLUI_SENTRY_DSN__"}),", ",(0,s.jsx)(n.code,{children:"__SHELLUI_SENTRY_ENVIRONMENT__"}),", and ",(0,s.jsx)(n.code,{children:"__SHELLUI_SENTRY_RELEASE__"}),". The core reads these individually and does not use the main stringified config for Sentry."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"What gets reported"}),": Uncaught JavaScript errors and unhandled promise rejections are sent to Sentry automatically."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"When Sentry is disabled"}),": In dev mode, when ",(0,s.jsx)(n.code,{children:"SENTRY_DSN"})," is not set, or when ",(0,s.jsx)(n.code,{children:"SENTRY_ENABLED"})," is ",(0,s.jsx)(n.code,{children:"false"})," or ",(0,s.jsx)(n.code,{children:"0"}),", Sentry is not initialized and no data is sent."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Context"}),(0,s.jsx)(n.th,{children:"Sentry initialized?"}),(0,s.jsx)(n.th,{children:"Notes"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"shellui start"})," (dev)"]}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"Ignored so you don\u2019t get dev noise."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsxs)(n.td,{children:["Production build, ",(0,s.jsx)(n.code,{children:"SENTRY_DSN"})," set"]}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{children:"Errors reported to your Sentry project."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsxs)(n.td,{children:["Production build, ",(0,s.jsx)(n.code,{children:"SENTRY_DSN"})," not set"]}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"No reporting."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsxs)(n.td,{children:["Production build, ",(0,s.jsx)(n.code,{children:"SENTRY_ENABLED=false"})," or ",(0,s.jsx)(n.code,{children:"0"})]}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"Disabled even if DSN is set."})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:["Sentry is configured only via env: set ",(0,s.jsx)(n.code,{children:"SENTRY_DSN"})," (and optionally ",(0,s.jsx)(n.code,{children:"SENTRY_ENABLED"}),", ",(0,s.jsx)(n.code,{children:"SENTRY_ENVIRONMENT"}),", ",(0,s.jsx)(n.code,{children:"SENTRY_RELEASE"}),") in deployment or ",(0,s.jsx)(n.code,{children:".env"}),". Nothing is required in ",(0,s.jsx)(n.code,{children:"shellui.config.ts"}),"."]})]})}function a(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}}}]);